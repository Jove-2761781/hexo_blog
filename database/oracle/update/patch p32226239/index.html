<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/hexo_blog/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/hexo_blog/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Hexo" href="https://jove-2761781.github.io/hexo_blog/rss.xml"><link rel="alternate" type="application/atom+xml" title="Hexo" href="https://jove-2761781.github.io/hexo_blog/atom.xml"><link rel="alternate" type="application/json" title="Hexo" href="https://jove-2761781.github.io/hexo_blog/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/hexo_blog/css/app.css?v=0.2.5"><link rel="canonical" href="https://jove-2761781.github.io/hexo_blog/database/oracle/update/patch%20p32226239/"><title>patch p32226239 | Yume Shoka = Hexo = subtitle</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">patch p32226239</h1><div class="meta"><span class="item" title="创建时间：2023-02-06 23:47:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-02-06T23:47:00+08:00">2023-02-06</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>21k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>19 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/hexo_blog/" rel="start">Yume Shoka</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/2b0a8c81d91579602eee343aff82c4c9.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/6c7f469735b99a6a04773240429dc7e0.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/c90c53e559eb45717ddb50f413599f87.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/9b626c5ba21d7cb4dbcba2b507688bbb.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/a3893b60653fe5923434b1eef4de7c7b.jpg"></li><li class="item" data-background-image="https://img.timelessq.com/images/2022/07/26/c370ed4ee6c8ac92941a49e11209fc78.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/hexo_blog/">首页</a></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jove-2761781.github.io/hexo_blog/database/oracle/update/patch%20p32226239/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/hexo_blog/images/avatar.jpg"><meta itemprop="name" content="Jove"><meta itemprop="description" content="subtitle, 个人博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><div class="body md" itemprop="articleBody"><ul><li></li></ul><h1 id="patch-32226239-gi-release-update-191000210119"><a class="anchor" href="#patch-32226239-gi-release-update-191000210119">#</a> Patch 32226239 - GI Release Update 19.10.0.0.210119</h1><h3 id="1-patch-installation-prerequisites"><a class="anchor" href="#1-patch-installation-prerequisites">#</a> 1 Patch Installation Prerequisites</h3><h4 id="11-update-opatch-utility"><a class="anchor" href="#11-update-opatch-utility">#</a> 1.1 Update OPatch Utility</h4><p>You must use the OPatch utility version 12.2.0.1.23 or later to apply this patch for all platforms.</p><p>To update Opatch, use the following instructions:</p><ol><li><p>Download the OPatch utility to a temporary directory.</p></li><li><p>For each Oracle RAC database home and the GI home that are being patched, run the following commands as the home owner to extract the OPatch utility.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">unzip</span> <span class="token operator">&lt;</span>OPATCH-ZIP<span class="token operator">></span> <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/OPatch/opatch version</pre></td></tr></table></figure></li></ol><p>The version output of the previous command should be 12.2.0.1.23 or later.</p><h4 id="12-validation-of-oracle-inventory"><a class="anchor" href="#12-validation-of-oracle-inventory">#</a> 1.2 Validation of Oracle Inventory</h4><p>Before beginning patch application, check the consistency of inventory information for GI home and each database home to be patched. Run the following command as respective Oracle home owner to check the consistency.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/OPatch/opatch lsinventory <span class="token parameter variable">-detail</span> <span class="token parameter variable">-oh</span> <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span></pre></td></tr></table></figure><p>If this command succeeds, it lists the Oracle components that are installed in the home. Save the output so you have the status prior to the patch apply.</p><p>If this command fails, contact Oracle Support Services for assistance.</p><h4 id="13-download-and-unzip-the-patch"><a class="anchor" href="#13-download-and-unzip-the-patch">#</a> 1.3 Download and Unzip the Patch</h4><p>To apply the patch, it must be accessible from all nodes in the Oracle cluster. Download the patch and unzip it to a shared location, this is called the <code>&lt;UNZIPPED_PATCH_LOCATION&gt;</code> . This directory must be empty and not be <code>/tmp</code> . Additionally, the directory should have read permission for the <code>ORA_INSTALL</code> group.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">unzip</span> p32226239_190000_Linux-x86-64.zip</pre></td></tr></table></figure><h4 id="14-run-opatch-conflict-check"><a class="anchor" href="#14-run-opatch-conflict-check">#</a> 1.4 Run OPatch Conflict Check</h4><p>Determine whether any currently installed one-off patches conflict with this patch 32226239 as follows:</p><ul><li><p>For Grid Infrastructure Home, as home user:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32218454</pre></td></tr><tr><td data-num="2"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32222571</pre></td></tr><tr><td data-num="3"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32218663</pre></td></tr><tr><td data-num="4"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/29340594</pre></td></tr><tr><td data-num="5"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32240590</pre></td></tr></table></figure></li><li><p>For Database home, as home user:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32218454</pre></td></tr><tr><td data-num="2"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckConflictAgainstOHWithDetail <span class="token parameter variable">-phBaseDir</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32222571</pre></td></tr></table></figure></li></ul><p>The report will indicate the interim patches that conflict with the patch 32226239 and the interim patches for which patch 32226239 is a superset.</p><p><strong>Note:</strong></p><p>When OPatch starts, it validates the patch and ensures that there are no conflicts with the software already installed in the  <code>ORACLE_HOME</code> . OPatch categorizes conflicts into the following types:</p><ul><li><p>Conflicts with a patch already applied to the  <code>ORACLE_HOME</code> .</p><p>In this case, stop the patch installation and contact Oracle Support Services.</p></li><li><p>Conflicts with subset patch already applied to the  <code>ORACLE_HOME</code> .</p><p>In this case, continue with the patch installation because as the new patch contains all the fixes from the existing patch in the  <code>ORACLE_HOME</code> . And, in any case, the subset patch will automatically be rolled back prior to the installation of the new patch.</p></li></ul><h4 id="15-run-opatch-systemspace-check"><a class="anchor" href="#15-run-opatch-systemspace-check">#</a> 1.5 Run OPatch SystemSpace Check</h4><p>Check if enough free space is available on the  <code>ORACLE_HOME</code>  filesystem for the patches to be applied as given below:</p><ul><li><p>For Grid Infrastructure Home, as home user:</p><ol><li><p>Create file  <code>/tmp/patch_list_gihome.txt</code>  with the following content:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token function">cat</span> <span class="token operator">></span> /tmp/patch_list_gihome.txt <span class="token operator">&lt;&lt;</span> <span class="token string">EOF</span></pre></td></tr><tr><td data-num="2"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32218454</pre></td></tr><tr><td data-num="3"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32222571</pre></td></tr><tr><td data-num="4"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32218663</pre></td></tr><tr><td data-num="5"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/29340594</pre></td></tr><tr><td data-num="6"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32240590</pre></td></tr><tr><td data-num="7"></td><td><pre>EOF</pre></td></tr></table></figure></li><li><p>Run the opatch command to check if enough free space is available in the Grid Infrastructure Home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckSystemSpace <span class="token parameter variable">-phBaseFile</span> /tmp/patch_list_gihome.txt</pre></td></tr></table></figure></li></ol></li><li><p>For Database home, as home user:</p><ol><li><p>Create file  <code>/tmp/patch_list_dbhome.txt</code>  with the following content:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token function">cat</span> <span class="token operator">></span> /tmp/patch_list_dbhome.txt <span class="token operator">&lt;&lt;</span> <span class="token string">EOF</span></pre></td></tr><tr><td data-num="2"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32218454</pre></td></tr><tr><td data-num="3"></td><td><pre>&lt;UNZIPPED_PATCH_LOCATION>/32226239/32222571</pre></td></tr><tr><td data-num="4"></td><td><pre>EOF</pre></td></tr></table></figure></li><li><p>Run opatch command to check if enough free space is available in the Database Home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>% <span class="token variable">$ORACLE_HOME</span>/OPatch/opatch prereq CheckSystemSpace <span class="token parameter variable">-phBaseFile</span> /tmp/patch_list_dbhome.txt</pre></td></tr></table></figure></li></ol></li></ul><p>The command output reports pass and fail messages as per the system space availability:</p><ul><li><p>If OPatch reports  <code>Prereq &quot;checkSystemSpace&quot; failed.</code> , then cleanup the system space as the required amount of space is not available.</p></li><li><p>If OPatch reports  <code>Prereq &quot;checkSystemSpace&quot; passed.</code> , then no action is needed. Proceed with patch installation.</p></li></ul><h3 id="2-one-off-patch-conflict-detection-and-resolution"><a class="anchor" href="#2-one-off-patch-conflict-detection-and-resolution">#</a> 2 One-off Patch Conflict Detection and Resolution</h3><p>Manually determine whether any currently installed one-off patches conflict with the PSU patch as follows:</p><ul><li><p>In the unzipped directory as described in <a href="">Download and Unzip the Patch</a>.</p></li><li><p>The following commands check for conflicts in both the 12.1 GI home and the 12.1 DB homes.</p><ul><li><p>In case you are applying the patch, run this command as root:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># GRID_HOME/OPatch/opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -analyze</span></pre></td></tr></table></figure></li><li><p>In case you are rolling back the patch, run this command as root:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># GRID_HOME/OPatch/opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239 -analyze</span></pre></td></tr></table></figure></li></ul></li></ul><p>Note that Oracle proactively generates interim patches for common conflicts.</p><h3 id="3-opatchauto"><a class="anchor" href="#3-opatchauto">#</a> 3 opatchauto</h3><p>The Opatch utility has automated the patch application for the Oracle Grid Infrastructure (GI) home and the Oracle RAC database homes. It operates by querying existing configurations and automating the steps required for patching each Oracle RAC database home of same version and the GI home.</p><p>The utility must be executed by an operating system (OS) user with  <code>root</code>  privileges, and it must be executed on each node in the cluster if the GI home or Oracle RAC database home is in non-shared storage. The utility should not be run in parallel on the cluster nodes.</p><p>Depending on command line options specified, one invocation of opatchauto can patch the GI home, Oracle RAC database homes, or both GI and Oracle RAC database homes of the same Oracle release version as the patch. You can also roll back the patch with the same selectivity.</p><p>Add the directory containing the opatchauto to the $PATH environment variable. For example:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># export PATH=$PATH:&lt;GI_HOME>/OPatch</span></pre></td></tr></table></figure><p>To patch the GI home and all Oracle RAC database homes of the same version:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure><p>To patch only the GI home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;GI_HOME></span></pre></td></tr></table></figure><p>To patch one or more Oracle RAC database homes:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;oracle_home1_path>,&lt;oracle_home2_path></span></pre></td></tr></table></figure><p>To roll back the patch from the GI home and each Oracle RAC database home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure><p>To roll back the patch from the GI home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;path to GI home></span></pre></td></tr></table></figure><p>To roll back the patch from the Oracle RAC database home:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;oracle_home1_path>,&lt;oracle_home2_path></span></pre></td></tr></table></figure><p>For more information about  <code>opatchauto</code> , see <span class="exturl" data-url="aHR0cDovL2RvY3Mub3JhY2xlLmNvbS9jZC9FMjQ2MjhfMDEvZG9jLjEyMS9lMzkzNzYvdG9jLmh0bQ==">Oracle® OPatch User's Guide</span>.</p><p>For detailed patch installation instructions, see <a href="">Patch Installation</a>.</p><h3 id="4-patch-installation"><a class="anchor" href="#4-patch-installation">#</a> 4 Patch Installation</h3><p>The patch instructions will differ based on the configuration of the Grid infrastructure and the Oracle RAC database homes. Patching instructions for Oracle RAC Database Homes and GI together are listed below.</p><p>The most common configurations are listed as follows:</p><ul><li><p>Case 1: Oracle RAC, where the GI Home and the Database Homes are not shared and ACFS file system is not configured</p></li><li><p>Case 2: Oracle RAC, where the GI Home is not shared, Database Home is shared, ACFS may be used</p></li><li><p>Case 3: Non-Oracle RAC Database homes</p></li></ul><p>For other configurations listed below, see My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE1OTE2MTYuMQ==">1591616.1</span>:</p><ul><li><p>GI Home is not shared, the Database Home is not shared, ACFS may be used.</p></li><li><p>Patching Oracle RAC Database Homes.</p></li><li><p>Patching GI Home alone.</p></li><li><p>Patching Oracle Restart Home.</p></li><li><p>Patching a software only GI Home installation or before the GI Home is configured.</p></li></ul><p><strong>Patching Oracle RAC Database Homes and GI Together</strong></p><ul><li><p><strong>Case 1: Oracle RAC, where the GI Home and the Database Homes are not shared and ACFS file system is not configured.</strong></p><p>As root user, execute the following command on each node of the cluster:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure></li><li><p><strong>Case 2: Oracle RAC, where the GI Home is not shared, Database Home is shared, ACFS may be used.</strong></p><p>Patching instructions:</p><ol><li><p>From the Oracle database home, make sure to stop the Oracle RAC databases running on all nodes. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl stop database –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>On the 1st node, unmount the ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for unmounting ACFS file systems.</p></li><li><p>On the 1st node, apply the patch to the GI Home using the  <code>opatchauto</code>  command. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;GI_HOME></span></pre></td></tr></table></figure></li><li><p>If the message, &quot;A system reboot is recommended before using ACFS&quot; is shown, then a reboot must be issued before continuing. Failure to do so will result in running with an unpatched ACFS\ADVM\OKS driver.</p></li><li><p>On the 1st node, remount ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for mounting ACFS file systems.</p></li><li><p>On the 1st node, apply the patch to the Database home using the  <code>opatchauto</code>  command. Since the Database home is shared, this operation will patch the Database home across the cluster. Note that a USM only patch cannot be applied to a database home. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;ORACLE_HOME></span></pre></td></tr></table></figure></li><li><p>On the 1st node only, restart the Oracle instance, which you have previously stopped in Step <a href="">1</a>. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl start instance –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span> <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>nodename<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>On the 2nd (next) node, unmount the ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for unmounting ACFS file systems.</p></li><li><p>On the 2nd node, apply the patch to GI Home using the  <code>opatchauto</code>  command. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto apply &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;GI_HOME></span></pre></td></tr></table></figure></li><li><p>If the message, &quot;A system reboot is recommended before using ACFS&quot; is shown, then a reboot must be issued before continuing. Failure to do so will result in running with an unpatched ACFS\ADVM\OKS driver.</p></li><li><p>On the 2nd node, running the  <code>opatchauto</code>  command in Step <a href="#GUID-F8E80702-38F1-47A0-8625-3D86FB329019__CIHDDCGD">9</a> will restart the stack.</p></li><li><p>On the 2nd node, remount ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for mounting ACFS file systems.</p></li><li><p>On the 2nd node only, restart the Oracle instance, which you have previously stopped in Step <a href="#GUID-F8E80702-38F1-47A0-8625-3D86FB329019__CIHHDAFI">1</a>. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl start instance –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span> <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>nodename<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>Repeat Steps <a href="">8</a> through <a href="">13</a> for all remaining nodes of the cluster.</p></li></ol></li><li><p><strong>Case 3: Non-Oracle RAC Database homes.</strong></p><p>Follow these steps:</p><ol><li><p>If you are using a Data Guard Physical Standby database, you must install this patch on both the primary database and the physical standby database, as described by My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTI3ODY0MS4x">278641.1</span>.</p></li><li><p>If this is not an Oracle RAC environment, shut down all instances and listeners associated with the Oracle home that you are updating. For more information, see Oracle Database Administrator's Guide.</p></li><li><p>Set your current directory to the directory where the patch is located and then run the OPatch utility by entering the following commands:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>UNZIPPED_PATCH_LOCATION<span class="token operator">></span>/32226239/32218454</pre></td></tr><tr><td data-num="2"></td><td><pre>opatch apply</pre></td></tr></table></figure></li><li><p>If there are errors, refer to <a href="">Known Issues</a>.</p></li></ol></li></ul><h3 id="5-installing-patch-in-standby-first-mode"><a class="anchor" href="#5-installing-patch-in-standby-first-mode">#</a> 5 Installing patch in Standby-First Mode</h3><p>For Data Guard Standby-First patching, see My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTEyNjU3MDAuMQ==">1265700.1</span>. For Standby-First patching for Oracle Database RU 12.2 and higher, the following points need to be considered:</p><ol><li><p>The Database RU subpatch 32218454 must be applied to the Data Guard standby using Opatch.</p></li><li><p>Datapatch must not be invoked on the Data Guard standby environment to apply post patch SQL actions for the Database RU. If datapatch is run on a standby, it will error while trying to call the  <code>SYS.DBMS_QOPATCH</code>  interface. For more details about this error, see My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE1OTk0NzkuMQ==">1599479.1</span>.</p></li><li><p>Datapatch must be invoked on the primary database after all the databases, that is primary and Data Guard, are patched and patch deployment of the Database RU is complete for the setup.</p></li></ol><h3 id="6-patch-post-installation-instructions"><a class="anchor" href="#6-patch-post-installation-instructions">#</a> 6 Patch Post-Installation Instructions</h3><p>After installing the patch, perform the following actions:</p><ol><li><p>Apply conflict resolution patches as explained in <a href="#GUID-EF9F3E01-8FBB-4ECE-BFFC-048EF4133C42">Applying Conflict Resolution Patches</a>.</p></li><li><p>If you are not using opatchauto, then load modified SQL files into the database, as explained in <a href="#GUID-05300C80-F0AB-4F7D-9F28-37738DDE3D50">Loading Modified SQL Files into the Database</a>.</p></li><li><p>Upgrade Oracle Recovery Manager Catalog, as explained in <a href="#UPOARENC">Upgrade Oracle Recovery Manager Catalog</a>.</p></li></ol><h4 id="61-applying-conflict-resolution-patches"><a class="anchor" href="#61-applying-conflict-resolution-patches">#</a> 6.1 Applying Conflict Resolution Patches</h4><p>Apply the patch conflict resolution interim patches that were determined to be needed when you performed the steps in <a href="#GUID-7EA5E77E-1938-4435-9346-C6139689A6F6">One-off Patch Conflict Detection and Resolution</a>.</p><h4 id="62-loading-modified-sql-files-into-the-database"><a class="anchor" href="#62-loading-modified-sql-files-into-the-database">#</a> 6.2 Loading Modified SQL Files into the Database</h4><p>The following steps load modified SQL files into the database. For a RAC environment, perform these steps on only one node.</p><p>Datapatch is run to complete the post-install SQL deployment for the PSU. For further details about Datapatch, including Known Issues and workarounds to common problems, see: Database 12c Post Patch SQL Automation (Doc ID <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE1ODU4MjIuMQ==">1585822.1</span>).</p><ol><li><p>For each separate database running on the same shared Oracle home being patched, run the  <code>datapatch</code>  utility as described in <a href="#GUID-05300C80-F0AB-4F7D-9F28-37738DDE3D50__CIHCFCAB" title="Steps to run datapatch script for single tenant versus multitenant (CDB/PDB).">Table 1-3</a>.</p><p>Table 1-3 Steps to Run the Datapatch Utility for Standalone DB Versus Single/Multitenant (CDB/PDB) DB</p><table><thead><tr><th>Steps</th><th>Standalone DB</th><th>Steps</th><th>Single/Multitenant (CDB/PDB) DB</th></tr></thead><tbody><tr><td>1</td><td><code>% sqlplus /nolog</code></td><td>1</td><td><code>% sqlplus /nolog</code></td></tr><tr><td>2</td><td><code>SQL&gt; Connect / as sysdba</code></td><td>2</td><td><code>SQL&gt; Connect / as sysdba</code></td></tr><tr><td>3</td><td><code>SQL&gt; startup</code></td><td>3</td><td><code>SQL&gt; startup</code></td></tr><tr><td>4</td><td><code>SQL&gt; quit</code></td><td>4</td><td><code>SQL&gt; alter pluggable database all open``;</code> <a href="#fn_1">Foot 1</a></td></tr><tr><td>5</td><td><code>% cd $ORACLE_HOME/OPatch</code></td><td>5</td><td><code>SQL&gt; quit</code></td></tr><tr><td>6</td><td><code>% ./datapatch -verbose</code></td><td>6</td><td><code>% cd $ORACLE_HOME/OPatch</code></td></tr><tr><td></td><td></td><td>7</td><td><code>% ./datapatch -verbose</code></td></tr></tbody></table><p>Footnote 1</p><p>It is recommended the Post Install step be run on all pluggable databases; however, the following command ( <code>SQL&gt; alter pluggable database</code>   <code>PDB_NAME</code>   <code>open</code>  ) could be substituted to only open certain PDBs in the single/multitenant database. Doing so will result in the Post Install step only being run on the CDB and opened PDB's. To update a pluggable database at a later date (skipped or newly plugged in), open the database using the  <code>alter pluggable database</code>  command mentioned previously and rerun the datapatch utility. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE5MzUzNjUuMQ==">1935365.1</span> Multitenant Unplug/Plug Best Practices for more information about the procedure for unplugging/plugging with different patch releases (in both directions).</p><p>The  <code>datapatch</code>  utility will then run the necessary apply scripts to load the modified SQL files into the database. An entry will be added to the  <code>dba_registry_sqlpatch</code>  view reflecting the patch application. In the  <code>dba_registry_sqlpatch</code>  view, verify the Status for the APPLY is &quot;SUCCESS&quot;. For any other status, refer to the following My Oracle Support note for additional information and actions: Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE2MDk3MTguMQ==">1609718.1</span> Datapatch Known Issues.</p></li><li><p>Check the following log files in  <code>$ORACLE_BASE/cfgtoollogs/sqlpatch/32218454/&lt;unique patch ID&gt;</code>  for errors:</p><p><code>32218454_apply_&lt;database SID&gt;&lt;CDB name&gt;&lt;timestamp&gt;.log</code></p><p>where  <code>database SID</code>  is the database SID,  <code>CDB name</code>  is the name of the multitenant container database, and  <code>timestamp</code>  is of the form YYYYMMMDD_HH_MM_SS.</p></li><li><p>Any databases that have invalid objects after the execution of datapatch should have utlrp.sql run to revalidate those objects.</p><p>For example:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">cd</span> <span class="token variable">$ORACLE_HOME</span>/rdbms/admin</pre></td></tr><tr><td data-num="2"></td><td><pre>sqlplus /nolog</pre></td></tr><tr><td data-num="3"></td><td><pre>SQL<span class="token operator">></span> CONNECT / AS SYSDBA</pre></td></tr><tr><td data-num="4"></td><td><pre>SQL<span class="token operator">></span> @utlrp.sql</pre></td></tr></table></figure></li></ol><h4 id="63-upgrade-oracle-recovery-manager-catalog"><a class="anchor" href="#63-upgrade-oracle-recovery-manager-catalog">#</a> 6.3 Upgrade Oracle Recovery Manager Catalog</h4><p>If you are using the Oracle Recovery Manager, the catalog needs to be upgraded. Enter the following command to upgrade it. The UPGRADE CATALOG command must be entered twice to confirm the upgrade.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ rman catalog username/password@alias</pre></td></tr><tr><td data-num="2"></td><td><pre>RMAN<span class="token operator">></span> UPGRADE CATALOG<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>RMAN<span class="token operator">></span> UPGRADE CATALOG<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>RMAN<span class="token operator">></span> EXIT<span class="token punctuation">;</span></pre></td></tr></table></figure><h3 id="7-patch-post-installation-instructions-for-databases-created-or-upgraded-after-installation-of-patch-in-the-oracle-home"><a class="anchor" href="#7-patch-post-installation-instructions-for-databases-created-or-upgraded-after-installation-of-patch-in-the-oracle-home">#</a> 7 Patch Post-Installation Instructions for Databases Created or Upgraded after Installation of Patch in the Oracle Home</h3><p>You must execute the steps in <a href="">Loading Modified SQL Files into the Database</a> for any new or upgraded database.</p><h3 id="8-patch-deinstallation"><a class="anchor" href="#8-patch-deinstallation">#</a> 8 Patch Deinstallation</h3><p>Datapatch is run to complete the post-deinstall SQL deployment for the Database subpatch. For further details about Datapatch, including Known Issues and workarounds to common problems, see: Database 12c Post Patch SQL Automation (Doc ID <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE1ODU4MjIuMQ==">1585822.1</span>).</p><p>The patch rollback instructions will differ based on the configuration of the Grid infrastructure and the Oracle RAC database homes. Roll Back instructions for Oracle RAC Database Homes and GI are listed below.</p><p>The most common configurations are listed as follows:</p><ul><li><p>Case 1: Oracle RAC, where the GI Home and Database Homes are not shared and ACFS file system is not configured</p></li><li><p>Case 2: Oracle RAC, where the GI Home is not shared, Database Home is shared and ACFS may be used</p></li><li><p>Case 3: Non-Oracle RAC Database homes</p></li></ul><p>For other configurations listed below, see My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE1OTE2MTYuMQ==">1591616.1</span>:</p><ul><li><p>GI Home is not shared, the Database Home is not shared, ACFS may be used.</p></li><li><p>Rolling back from Oracle RAC Database Homes.</p></li><li><p>Rolling back from GI Home alone.</p></li><li><p>Rolling back the patch from Oracle Restart Home.</p></li><li><p>Rolling back the patch from a software only GI Home installation or before the GI Home is configured.</p></li></ul><p><strong>Roll Back the Oracle RAC Database Homes and GI Together</strong></p><ul><li><p><strong>Case 1: Oracle RAC, where the GI Home and Database Homes are not shared and ACFS file system is not configured.</strong></p><p>As root user, execute the following command on each node of the cluster.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure><p>If the message, &quot;A system reboot is recommended before using ACFS&quot; is shown, then a reboot must be issued before continuing. Failure to do so will result in running with an unpatched ACFS\ADVM\OKS driver.</p></li><li><p><strong>Case 2: Oracle RAC, where the GI Home is not shared, Database Home is shared and ACFS may be used.</strong></p><ol><li><p>From the Oracle database home, make sure to stop the Oracle RAC databases running on all nodes. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl stop database –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>On the 1st node, unmount the ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for unmounting ACFS file systems.</p></li><li><p>On the 1st node, roll back the patch from the GI Home using the  <code>opatchauto</code>  command. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239 -oh &lt;GI_HOME></span></pre></td></tr></table></figure></li><li><p>If the message, &quot;A system reboot is recommended before using ACFS&quot; is shown, then a reboot must be issued before continuing. Failure to do so will result in running with an unpatched ACFS\ADVM\OKS driver.</p></li><li><p>On the 1st node, remount ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for mounting ACFS file systems.</p></li><li><p>On the 1st node, roll back the patch to the Database home using the  <code>opatchauto</code>  command. This operation will rollback the patch to the Database home across the cluster given that it is a shared ACFS home. Note that a USM only patch cannot be applied to a Database home. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure></li><li><p>On the 1st node only, restart the Oracle instance, which you have previously stopped in Step <a href="#GUID-F8E80702-38F1-47A0-8625-3D86FB329019__CIHHDAFI">1</a>. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl start instance –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span> <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>nodename<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>On the 2nd (next) node, unmount the ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for unmounting ACFS file systems.</p></li><li><p>On the 2nd node, roll back the patch to GI Home using the  <code>opatchauto</code>  command. As root user, execute the following command:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># &lt;GI_HOME>/OPatch/opatchauto rollback &lt;UNZIPPED_PATCH_LOCATION>/32226239</span></pre></td></tr></table></figure></li><li><p>If the message, &quot;A system reboot is recommended before using ACFS&quot; is shown, then a reboot must be issued before continuing. Failure to do so will result in running with an unpatched ACFS\ADVM\OKS driver.</p></li><li><p>On the 2nd node, running the  <code>opatchauto</code>  command in Step <a href="#GUID-B37B005F-2294-4E60-B2A7-F73282FB2273__CIHCIGEG">9</a> will restart the stack.</p></li><li><p>On the 2nd node, remount ACFS file systems. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE0OTQ2NTIuMQ==">1494652.1</span> for mounting ACFS file systems.</p></li><li><p>On the 2nd node only, restart the Oracle instance, which you have previously stopped in Step <a href="#GUID-B37B005F-2294-4E60-B2A7-F73282FB2273__CIHCJAEF">1</a>. As the database home owner execute:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token operator">&lt;</span>ORACLE_HOME<span class="token operator">></span>/bin/srvctl start instance –d <span class="token operator">&lt;</span>db-unique-name<span class="token operator">></span> <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>nodename<span class="token operator">></span></pre></td></tr></table></figure></li><li><p>Repeat Steps <a href="#GUID-B37B005F-2294-4E60-B2A7-F73282FB2273__CIHBJCFI">8</a> through <a href="#GUID-B37B005F-2294-4E60-B2A7-F73282FB2273__CIHBIDHH">13</a> for all remaining nodes of the cluster.</p></li></ol></li><li><p><strong>Case 3: Non-Oracle RAC Database homes.</strong></p><p>Follow these steps:</p><ol><li><p>Shut down all instances and listeners associated with the Oracle home that you are updating. For more information, see Oracle Database Administrator's Guide.</p></li><li><p>Run the OPatch utility specifying the  <code>rollback</code>  argument as follows.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>opatch rollback <span class="token parameter variable">-id</span> <span class="token number">32218454</span></pre></td></tr></table></figure></li><li><p>If there are errors, refer to <a href="#GUID-774FEA2B-9E36-4D19-989F-C42DE574915F">Known Issues</a>.</p></li></ol></li></ul><h3 id="9-patch-post-deinstallation-instructions"><a class="anchor" href="#9-patch-post-deinstallation-instructions">#</a> 9 Patch Post-Deinstallation Instructions</h3><p>After deinstalling the patch, perform the following actions.</p><ul><li><p><a href="">Run the datapatch Utility</a></p></li><li><p><a href="">Upgrade Oracle Recovery Manager Catalog</a></p></li></ul><h4 id="91-run-the-datapatch-utility"><a class="anchor" href="#91-run-the-datapatch-utility">#</a> 9.1 Run the datapatch Utility</h4><p>Perform the following steps:</p><ol><li><p>For each separate database running on the Oracle home being patched, run the  <code>datapatch</code>  utility as described in <a href="#GUID-682E2CCD-61C5-41F6-AA62-ED4314EE57DD__CIHJCEJE" title="Steps to run datapatch script for single tenant versus multitenant (CDB/PDB).">Table 1-4</a>. If this is Oracle RAC, run datapatch on only one instance.</p><p>Table 1-4 Steps to Run the datapatch Utility for Standalone DB Versus Single/Multitenant (CDB/PDB) DB</p><table><thead><tr><th>Steps</th><th>Standalone DB</th><th>Steps</th><th>Single/Multitenant (CDB/PDB) DB</th></tr></thead><tbody><tr><td>1</td><td><code>% sqlplus /nolog</code></td><td>1</td><td><code>% sqlplus /nolog</code></td></tr><tr><td>2</td><td><code>SQL&gt; Connect / as sysdba</code></td><td>2</td><td><code>SQL&gt; Connect / as sysdba</code></td></tr><tr><td>3</td><td><code>SQL&gt; startup</code></td><td>3</td><td><code>SQL&gt; startup</code></td></tr><tr><td>4</td><td><code>SQL&gt; quit</code></td><td>4</td><td><code>SQL&gt; alter pluggable database all</code>   <code>open``;</code> <a href="#fn_1">Foot 1</a></td></tr><tr><td>5</td><td><code>% cd $ORACLE_HOME/OPatch</code></td><td>5</td><td><code>SQL&gt; quit</code></td></tr><tr><td>6</td><td><code>% ./datapatch -verbose</code></td><td>6</td><td><code>% cd $ORACLE_HOME/OPatch</code></td></tr><tr><td></td><td></td><td>7</td><td><code>% ./datapatch -verbose</code></td></tr></tbody></table><p>Footnote 1</p><p>It is recommended the Post Install step be run on all pluggable databases; however, the following command ( <code>SQL&gt; alter pluggable database</code>   <code>PDB_NAME</code>   <code>open</code>  ) could be substituted to only open certain PDBs in the single/multitenant database. Doing so will result in the Post Install step only being run on the CDB and opened PDB's. To update a pluggable database at a later date (skipped or newly plugged in), open the database using the  <code>alter pluggable database</code>  command mentioned previously and rerun the datapatch utility. See My Oracle Support Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE5MzUzNjUuMQ==">1935365.1</span> Multitenant Unplug/Plug Best Practices for more information about the procedure for unplugging/plugging with different patch releases (in both directions).</p><p>The  <code>datapatch</code>  utility will then run the necessary apply scripts to load the modified SQL files into the database. An entry will be added to the  <code>dba_registry_sqlpatch</code>  view reflecting the patch application. In the  <code>dba_registry_sqlpatch</code>  view, verify the Status for the APPLY is &quot;SUCCESS&quot;. For any other status, refer to the following My Oracle Support note for additional information and actions: Document <span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0Lm9yYWNsZS5jb20vQ1NQL21haW4vYXJ0aWNsZT9jbWQ9c2hvdyZhbXA7dHlwZT1OT1QmYW1wO2lkPTE2MDk3MTguMQ==">1609718.1</span> Datapatch Known Issues.</p></li><li><p>Check the following log files in  <code>$ORACLE_HOME/sqlpatch/32218454/</code>  for errors:</p><p><code>32218454_rollback_&lt;database SID&gt;_&lt;CDB name&gt;_&lt;timestamp&gt;.log</code></p><p>where  <code>database SID</code>  is the database SID,  <code>CDB name</code>  is the name of the multitenant container database, and  <code>timestamp</code>  is of the form YYYYMMMDD_HH_MM_SS.</p></li><li><p>Any databases that have invalid objects after the execution of datapatch should have utlrp.sql run to revalidate those objects.</p><p>For example:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">cd</span> <span class="token variable">$ORACLE_HOME</span>/rdbms/admin</pre></td></tr><tr><td data-num="2"></td><td><pre>sqlplus /nolog</pre></td></tr><tr><td data-num="3"></td><td><pre>SQL<span class="token operator">></span> CONNECT / AS SYSDBA</pre></td></tr><tr><td data-num="4"></td><td><pre>SQL<span class="token operator">></span> @utlrp.sql</pre></td></tr></table></figure></li></ol><h4 id="92-upgrade-oracle-recovery-manager-catalog"><a class="anchor" href="#92-upgrade-oracle-recovery-manager-catalog">#</a> 9.2 Upgrade Oracle Recovery Manager Catalog</h4><p>If you are using the Oracle Recovery Manager, the catalog needs to be upgraded. Enter the following command to upgrade it. The UPGRADE CATALOG command must be entered twice to confirm the upgrade.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ rman catalog username/password@alias</pre></td></tr><tr><td data-num="2"></td><td><pre>RMAN<span class="token operator">></span> UPGRADE CATALOG<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>RMAN<span class="token operator">></span> UPGRADE CATALOG<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>RMAN<span class="token operator">></span> EXIT<span class="token punctuation">;</span></pre></td></tr></table></figure></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-02-06 22:06:34" itemprop="dateModified" datetime="2023-02-06T22:06:34+08:00">2023-02-06</time> </span><span id="database/oracle/update/patch p32226239/" class="item leancloud_visitors" data-flag-title="patch p32226239" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/hexo_blog/images/wechatpay.png" alt="Jove 微信支付"><p>微信支付</p></div><div><img data-src="/hexo_blog/images/alipay.png" alt="Jove 支付宝"><p>支付宝</p></div><div><img data-src="/hexo_blog/images/paypal.png" alt="Jove 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Jove <i class="ic i-at"><em>@</em></i>Hexo</li><li class="link"><strong>本文链接：</strong> <a href="https://jove-2761781.github.io/hexo_blog/database/oracle/update/patch%20p32226239/" title="patch p32226239">https://jove-2761781.github.io/hexo_blog/database/oracle/update/patch p32226239/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/hexo_blog/database/oracle/update/patch%20p20299014/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;b4993dcc18b931060093920da621db79.jpg" title="patch p20299014"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>patch p20299014</h3></a></div><div class="item right"><a href="/hexo_blog/database/oracle/update/patch%20p6880880/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;img.timelessq.com&#x2F;images&#x2F;2022&#x2F;07&#x2F;26&#x2F;2aaa20665dd5e5704a35cf4f6de766db.jpg" title="patch p6880880"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i></span><h3>patch p6880880</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#patch-32226239-gi-release-update-191000210119"><span class="toc-number">1.</span> <span class="toc-text">Patch 32226239 - GI Release Update 19.10.0.0.210119</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-patch-installation-prerequisites"><span class="toc-number">1.0.1.</span> <span class="toc-text">1 Patch Installation Prerequisites</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-update-opatch-utility"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">1.1 Update OPatch Utility</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-validation-of-oracle-inventory"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">1.2 Validation of Oracle Inventory</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-download-and-unzip-the-patch"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">1.3 Download and Unzip the Patch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-run-opatch-conflict-check"><span class="toc-number">1.0.1.4.</span> <span class="toc-text">1.4 Run OPatch Conflict Check</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-run-opatch-systemspace-check"><span class="toc-number">1.0.1.5.</span> <span class="toc-text">1.5 Run OPatch SystemSpace Check</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-one-off-patch-conflict-detection-and-resolution"><span class="toc-number">1.0.2.</span> <span class="toc-text">2 One-off Patch Conflict Detection and Resolution</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-opatchauto"><span class="toc-number">1.0.3.</span> <span class="toc-text">3 opatchauto</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-patch-installation"><span class="toc-number">1.0.4.</span> <span class="toc-text">4 Patch Installation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-installing-patch-in-standby-first-mode"><span class="toc-number">1.0.5.</span> <span class="toc-text">5 Installing patch in Standby-First Mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-patch-post-installation-instructions"><span class="toc-number">1.0.6.</span> <span class="toc-text">6 Patch Post-Installation Instructions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#61-applying-conflict-resolution-patches"><span class="toc-number">1.0.6.1.</span> <span class="toc-text">6.1 Applying Conflict Resolution Patches</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#62-loading-modified-sql-files-into-the-database"><span class="toc-number">1.0.6.2.</span> <span class="toc-text">6.2 Loading Modified SQL Files into the Database</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#63-upgrade-oracle-recovery-manager-catalog"><span class="toc-number">1.0.6.3.</span> <span class="toc-text">6.3 Upgrade Oracle Recovery Manager Catalog</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-patch-post-installation-instructions-for-databases-created-or-upgraded-after-installation-of-patch-in-the-oracle-home"><span class="toc-number">1.0.7.</span> <span class="toc-text">7 Patch Post-Installation Instructions for Databases Created or Upgraded after Installation of Patch in the Oracle Home</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-patch-deinstallation"><span class="toc-number">1.0.8.</span> <span class="toc-text">8 Patch Deinstallation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-patch-post-deinstallation-instructions"><span class="toc-number">1.0.9.</span> <span class="toc-text">9 Patch Post-Deinstallation Instructions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#91-run-the-datapatch-utility"><span class="toc-number">1.0.9.1.</span> <span class="toc-text">9.1 Run the datapatch Utility</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#92-upgrade-oracle-recovery-manager-catalog"><span class="toc-number">1.0.9.2.</span> <span class="toc-text">9.2 Upgrade Oracle Recovery Manager Catalog</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Jove" data-src="/hexo_blog/images/avatar.jpg"><p class="name" itemprop="name">Jove</p><div class="description" itemprop="description">个人博客</div></div><nav class="state"><div class="item posts"><a href="/hexo_blog/archives/"><span class="count">110</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/hexo_blog/categories/"><span class="count">7</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/hexo_blog/tags/"><span class="count">21</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0pvdmUtMjc2MTc4MQ==" title="https:&#x2F;&#x2F;github.com&#x2F;Jove-2761781"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/hexo_blog/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/hexo_blog/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/hexo_blog/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/hexo_blog/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/hexo_blog/links/" rel="section"><i class="ic i-link"></i>Links</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/hexo_blog/database/oracle/update/patch%20p20299014/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/hexo_blog/database/oracle/update/patch%20p6880880/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/trobuleshooting/ora-00600%206856/" title="ORA-00600 6856">ORA-00600 6856</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/trobuleshooting/ora-00845/" title="ORA-00845">ORA-00845</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/linux/rhel/text%20processing/sed/" title="sed">sed</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/linux/rhel/shell/lsb_functions/" title="lsb_functions">lsb_functions</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/linux/rhel/diskmgmt/udev/" title="udev">udev</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/trobuleshooting/ora-27302/" title="ORA-27302">ORA-27302</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/linux/rhel/shell/ping/" title="ping">ping</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/migration/datapump/datapump/" title="datapump">datapump</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/migration/xtts/overview/" title="overview">overview</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/hexo_blog/database/oracle/migration/endian_format/" title="endian_format">endian_format</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Jove @ Yume Shoka</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">320k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">4:51</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"database/oracle/update/patch p32226239/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/hexo_blog/js/app.js?v=0.2.5"></script></body></html>